<form [formGroup]="formFilter">
  <div class="filters-container">
    @for (item of filterConfig; track $index) {
      @if (item.type === "search") {
        <div class="search-input">
          @if (item.name) {
            <p-iconfield>
              <p-inputicon styleClass="pi pi-search" />
              <input
                pInputText
                [formControlName]="item.name || 'key'"
                id="searchBy"
                type="text"
                [placeholder]="item.placeholder | translate"
                class="w-full sm:w-auto"
              />
            </p-iconfield>
          }
        </div>
      }
      @if (item.type === "filter") {
        <div>
          <button class="custom-btn btn-white" (click)="op.toggle($event)">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="16"
              height="16"
              viewBox="0 0 16 16"
              fill="none"
            >
              <path
                d="M6 3.33335C5.82319 3.33335 5.65362 3.40359 5.5286 3.52861C5.40357 3.65364 5.33333 3.82321 5.33333 4.00002C5.33333 4.17683 5.40357 4.3464 5.5286 4.47142C5.65362 4.59644 5.82319 4.66668 6 4.66668C6.17681 4.66668 6.34638 4.59644 6.47141 4.47142C6.59643 4.3464 6.66667 4.17683 6.66667 4.00002C6.66667 3.82321 6.59643 3.65364 6.47141 3.52861C6.34638 3.40359 6.17681 3.33335 6 3.33335ZM4.11333 3.33335C4.25107 2.94299 4.50649 2.60497 4.8444 2.36588C5.18231 2.12678 5.58606 1.99838 6 1.99838C6.41394 1.99838 6.81769 2.12678 7.1556 2.36588C7.49351 2.60497 7.74893 2.94299 7.88667 3.33335H12.6667C12.8435 3.33335 13.013 3.40359 13.1381 3.52861C13.2631 3.65364 13.3333 3.82321 13.3333 4.00002C13.3333 4.17683 13.2631 4.3464 13.1381 4.47142C13.013 4.59644 12.8435 4.66668 12.6667 4.66668H7.88667C7.74893 5.05704 7.49351 5.39506 7.1556 5.63416C6.81769 5.87325 6.41394 6.00165 6 6.00165C5.58606 6.00165 5.18231 5.87325 4.8444 5.63416C4.50649 5.39506 4.25107 5.05704 4.11333 4.66668H3.33333C3.15652 4.66668 2.98695 4.59644 2.86193 4.47142C2.73691 4.3464 2.66667 4.17683 2.66667 4.00002C2.66667 3.82321 2.73691 3.65364 2.86193 3.52861C2.98695 3.40359 3.15652 3.33335 3.33333 3.33335H4.11333ZM10 7.33335C9.82319 7.33335 9.65362 7.40359 9.5286 7.52861C9.40357 7.65364 9.33333 7.82321 9.33333 8.00002C9.33333 8.17683 9.40357 8.3464 9.5286 8.47142C9.65362 8.59644 9.82319 8.66668 10 8.66668C10.1768 8.66668 10.3464 8.59644 10.4714 8.47142C10.5964 8.3464 10.6667 8.17683 10.6667 8.00002C10.6667 7.82321 10.5964 7.65364 10.4714 7.52861C10.3464 7.40359 10.1768 7.33335 10 7.33335ZM8.11333 7.33335C8.25107 6.94299 8.50649 6.60497 8.8444 6.36588C9.18231 6.12678 9.58606 5.99838 10 5.99838C10.4139 5.99838 10.8177 6.12678 11.1556 6.36588C11.4935 6.60497 11.7489 6.94299 11.8867 7.33335H12.6667C12.8435 7.33335 13.013 7.40359 13.1381 7.52861C13.2631 7.65364 13.3333 7.82321 13.3333 8.00002C13.3333 8.17683 13.2631 8.3464 13.1381 8.47142C13.013 8.59644 12.8435 8.66668 12.6667 8.66668H11.8867C11.7489 9.05704 11.4935 9.39506 11.1556 9.63416C10.8177 9.87325 10.4139 10.0017 10 10.0017C9.58606 10.0017 9.18231 9.87325 8.8444 9.63416C8.50649 9.39506 8.25107 9.05704 8.11333 8.66668H3.33333C3.15652 8.66668 2.98695 8.59644 2.86193 8.47142C2.73691 8.3464 2.66667 8.17683 2.66667 8.00002C2.66667 7.82321 2.73691 7.65364 2.86193 7.52861C2.98695 7.40359 3.15652 7.33335 3.33333 7.33335H8.11333ZM6 11.3334C5.82319 11.3334 5.65362 11.4036 5.5286 11.5286C5.40357 11.6536 5.33333 11.8232 5.33333 12C5.33333 12.1768 5.40357 12.3464 5.5286 12.4714C5.65362 12.5964 5.82319 12.6667 6 12.6667C6.17681 12.6667 6.34638 12.5964 6.47141 12.4714C6.59643 12.3464 6.66667 12.1768 6.66667 12C6.66667 11.8232 6.59643 11.6536 6.47141 11.5286C6.34638 11.4036 6.17681 11.3334 6 11.3334ZM4.11333 11.3334C4.25107 10.943 4.50649 10.605 4.8444 10.3659C5.18231 10.1268 5.58606 9.99838 6 9.99838C6.41394 9.99838 6.81769 10.1268 7.1556 10.3659C7.49351 10.605 7.74893 10.943 7.88667 11.3334H12.6667C12.8435 11.3334 13.013 11.4036 13.1381 11.5286C13.2631 11.6536 13.3333 11.8232 13.3333 12C13.3333 12.1768 13.2631 12.3464 13.1381 12.4714C13.013 12.5964 12.8435 12.6667 12.6667 12.6667H7.88667C7.74893 13.057 7.49351 13.3951 7.1556 13.6342C6.81769 13.8733 6.41394 14.0017 6 14.0017C5.58606 14.0017 5.18231 13.8733 4.8444 13.6342C4.50649 13.3951 4.25107 13.057 4.11333 12.6667H3.33333C3.15652 12.6667 2.98695 12.5964 2.86193 12.4714C2.73691 12.3464 2.66667 12.1768 2.66667 12C2.66667 11.8232 2.73691 11.6536 2.86193 11.5286C2.98695 11.4036 3.15652 11.3334 3.33333 11.3334H4.11333Z"
                fill="#333435"
              />
            </svg>
            {{ "general.filter" | translate }}
          </button>
          <p-popover styleClass="filter-overlay" #op>
            <div class="filter-body">
              @for (option of item.filterOptions; track $index) {
                <div class="filter-group our-field">
                  @if (option.type === "input") {
                    <input
                      pInputText
                      [formControlName]="option.inputName"
                      [type]="option.inputType"
                      [placeholder]="option.placeholder | translate"
                    />
                  } @else if (option.type === "select") {
                    @if (option.multiple) {
                      <p-multiSelect
                        [formControlName]="option.inputName"
                        [options]="option.options"
                        optionLabel="name"
                        optionValue="id"
                        [placeholder]="
                          option.placeholder || option.label | translate
                        "
                      ></p-multiSelect>
                    } @else {
                      <p-select
                        [formControlName]="option.inputName"
                        [options]="option.options"
                        optionLabel="name"
                        optionValue="id"
                        [placeholder]="
                          option.placeholder || option.label | translate
                        "
                      ></p-select>
                    }
                  } @else if (option.type === "date") {
                    <p-calendar
                      [formControlName]="option.inputName"
                    ></p-calendar>
                  }
                </div>
              }
            </div>
            <div class="filter-footer">
              <button
                class="custom-btn btn-white"
                (click)="resetFilter($event)"
              >
                {{ "general.reset" | translate }}
              </button>
              <button
                class="custom-btn btn-primary"
                (click)="applyFilter($event)"
              >
                {{ "general.apply" | translate }}
              </button>
            </div>
          </p-popover>
        </div>
      } @else if (item.type === "btn") {
        <button
          class=" custom-btn anm-{{ item.anmSeverity }}} btn-{{
            item.btnSeverity
          }}"
          type="button"
          (click)="item.btnCallback?.($event)"
        >
          <i class="pi {{ item.btnIcon }}"></i>
          <span>{{ item.label | translate }}</span>
        </button>
      } @else if (item.type === "select") {
        @if (item.name) {
          <div>
            @if (item.multiple) {
              <p-multiSelect
                [formControlName]="item.name"
                [options]="item.DDOption"
                optionLabel="name"
                optionValue="id"
              ></p-multiSelect>
            } @else {
              <p-select
                [formControlName]="item.name"
                [options]="item.DDOption"
                optionLabel="name"
                optionValue="id"
              ></p-select>
            }
          </div>
        }
      }
    }
  </div>
</form>

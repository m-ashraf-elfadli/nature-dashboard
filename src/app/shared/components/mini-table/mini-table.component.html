@if(data.length ){
<p-table
  [value]="data"
  [reorderableColumns]="reorderable"
  (onRowReorder)="onRowReorder($event)"
>
  <ng-template pTemplate="header">
    <tr class="row-header">
      <th>{{ columns[0]?.header }}</th>
      <th *ngFor="let col of columns.slice(1)">
        {{ col.header }}
      </th>
    </tr>
  </ng-template>

  <!-- BODY -->
  <ng-template pTemplate="body" let-row let-index="rowIndex">
    <tr [pReorderableRow]="reorderable ? index : null">
      <!-- ðŸ”¹ FIRST COLUMN (name + drag + image) -->
      <td>
        <!-- Drag -->
        <div class="name-column">
          <span *ngIf="reorderable" pReorderableRowHandle class="drag-icon">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="17"
              height="17"
              viewBox="0 0 17 17"
              fill="none"
            >
              <path
                d="M6.02091 4.95833C6.39664 4.95833 6.75697 4.80908 7.02265 4.5434C7.28833 4.27772 7.43758 3.91739 7.43758 3.54167C7.43758 3.16594 7.28833 2.80561 7.02265 2.53993C6.75697 2.27426 6.39664 2.125 6.02091 2.125C5.64519 2.125 5.28486 2.27426 5.01918 2.53993C4.7535 2.80561 4.60425 3.16594 4.60425 3.54167C4.60425 3.91739 4.7535 4.27772 5.01918 4.5434C5.28486 4.80908 5.64519 4.95833 6.02091 4.95833ZM6.02091 9.91667C6.39664 9.91667 6.75697 9.76741 7.02265 9.50173C7.28833 9.23606 7.43758 8.87572 7.43758 8.5C7.43758 8.12428 7.28833 7.76394 7.02265 7.49827C6.75697 7.23259 6.39664 7.08333 6.02091 7.08333C5.64519 7.08333 5.28486 7.23259 5.01918 7.49827C4.7535 7.76394 4.60425 8.12428 4.60425 8.5C4.60425 8.87572 4.7535 9.23606 5.01918 9.50173C5.28486 9.76741 5.64519 9.91667 6.02091 9.91667ZM7.43758 13.4583C7.43758 13.8341 7.28833 14.1944 7.02265 14.4601C6.75697 14.7257 6.39664 14.875 6.02091 14.875C5.64519 14.875 5.28486 14.7257 5.01918 14.4601C4.7535 14.1944 4.60425 13.8341 4.60425 13.4583C4.60425 13.0826 4.7535 12.7223 5.01918 12.4566C5.28486 12.1909 5.64519 12.0417 6.02091 12.0417C6.39664 12.0417 6.75697 12.1909 7.02265 12.4566C7.28833 12.7223 7.43758 13.0826 7.43758 13.4583ZM10.9792 4.95833C11.355 4.95833 11.7153 4.80908 11.981 4.5434C12.2467 4.27772 12.3959 3.91739 12.3959 3.54167C12.3959 3.16594 12.2467 2.80561 11.981 2.53993C11.7153 2.27426 11.355 2.125 10.9792 2.125C10.6035 2.125 10.2432 2.27426 9.97751 2.53993C9.71184 2.80561 9.56258 3.16594 9.56258 3.54167C9.56258 3.91739 9.71184 4.27772 9.97751 4.5434C10.2432 4.80908 10.6035 4.95833 10.9792 4.95833ZM12.3959 8.5C12.3959 8.87572 12.2467 9.23606 11.981 9.50173C11.7153 9.76741 11.355 9.91667 10.9792 9.91667C10.6035 9.91667 10.2432 9.76741 9.97751 9.50173C9.71184 9.23606 9.56258 8.87572 9.56258 8.5C9.56258 8.12428 9.71184 7.76394 9.97751 7.49827C10.2432 7.23259 10.6035 7.08333 10.9792 7.08333C11.355 7.08333 11.7153 7.23259 11.981 7.49827C12.2467 7.76394 12.3959 8.12428 12.3959 8.5ZM10.9792 14.875C11.355 14.875 11.7153 14.7257 11.981 14.4601C12.2467 14.1944 12.3959 13.8341 12.3959 13.4583C12.3959 13.0826 12.2467 12.7223 11.981 12.4566C11.7153 12.1909 11.355 12.0417 10.9792 12.0417C10.6035 12.0417 10.2432 12.1909 9.97751 12.4566C9.71184 12.7223 9.56258 13.0826 9.56258 13.4583C9.56258 13.8341 9.71184 14.1944 9.97751 14.4601C10.2432 14.7257 10.6035 14.875 10.9792 14.875Z"
                fill="black"
              />
            </svg>
          </span>

          <!-- Image -->
          <img *ngIf="showImage" [src]="row[imageField]" class="row-image" />

          <!-- Text -->
          <span class="text">
            {{ row[columns[0].field] }}
          </span>
        </div>
      </td>

      <!-- ðŸ”¹ OTHER COLUMNS -->
      <td *ngFor="let col of columns.slice(1)">
        <ng-container [ngSwitch]="col.type">
          <!-- Action -->
          <button
            *ngSwitchCase="'action'"
            class="delete-btn"
            (click)="onDelete(index)"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="14"
              height="14"
              viewBox="0 0 14 14"
              fill="none"
            >
              <g clip-path="url(#clip0_9916_20048)">
                <path
                  d="M8.71281 3.26727V2.83164C8.71281 2.2217 8.71281 1.91673 8.5941 1.68376C8.48969 1.47884 8.32308 1.31223 8.11816 1.20781C7.88519 1.08911 7.58022 1.08911 6.97028 1.08911H6.09901C5.48907 1.08911 5.1841 1.08911 4.95114 1.20781C4.74621 1.31223 4.5796 1.47884 4.47519 1.68376C4.35649 1.91673 4.35649 2.2217 4.35649 2.83164V3.26727M5.44557 6.26224V8.98494M7.62373 6.26224V8.98494M1.63379 3.26727H11.4355M10.3464 3.26727V9.36612C10.3464 10.281 10.3464 10.7385 10.1684 11.0879C10.0117 11.3953 9.76184 11.6452 9.45445 11.8019C9.105 11.9799 8.64755 11.9799 7.73263 11.9799H5.33666C4.42175 11.9799 3.96429 11.9799 3.61484 11.8019C3.30745 11.6452 3.05754 11.3953 2.90092 11.0879C2.72287 10.7385 2.72287 10.281 2.72287 9.36612V3.26727"
                  stroke="#F96C4D"
                  stroke-width="0.980172"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
              </g>
              <defs>
                <clipPath id="clip0_9916_20048">
                  <rect width="13.069" height="13.069" fill="white" />
                </clipPath>
              </defs>
            </svg>
          </button>

          <!-- Default -->
          <span *ngSwitchDefault>
            {{ row[col.field] }}
          </span>
        </ng-container>
      </td>
    </tr>
  </ng-template>
</p-table>
}
